(function(e){function n(){return(new Date).getTime()}var t={},i=!1,r=0,u=0;e.put=function(r,u,o){i&&console.log("caching: "+r+" = "+u+" (@"+o+")");var c=t[r];c&&clearTimeout(c.timeout);var f=o+n(),a={value:u,expire:f};if(!isNaN(f)){var s=setTimeout(function(){e.del(r)},o);a.timeout=s}t[r]=a},e.del=function(e){delete t[e]},e.clear=function(){t={}},e.get=function(o){var c=t[o];if(c!==void 0){if(isNaN(c.expire)||c.expire>=n())return i&&r++,c.value;i&&u++,e.del(o)}return null},e.size=function(){var n,i=0;for(n in t)t.hasOwnProperty(n)&&e.get(n)!==null&&i++;return i},e.memsize=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n},e.debug=function(e){i=e},e.hits=function(){return r},e.misses=function(){return u}})(typeof exports=="undefined"?this.memorycache={}:exports)
